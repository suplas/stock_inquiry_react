{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchStockData = createAsyncThunk(\"stock/items\", async ({\n  page,\n  limit\n}, thunkAPI) => {\n  console.log(\"api 통신\");\n  const response = await axios.get(`http://219.250.2.138:5018/krx/api/list/${page}/${limit}`);\n  const responeData = response.data;\n  return responeData;\n});\nconst initialState = {\n  item: {\n    data: [{\n      id: 0,\n      BAS_DD: 0,\n      ISU_NM: \"\",\n      MKTCAP: 0,\n      MKT_NM: \"\",\n      TDD_OPNPRC: 0,\n      ACC_TRDVOL: 0\n    }],\n    totalPage: 0,\n    totalData: 0\n  },\n  fetchStatus: \"\",\n  page: 1\n};\nconst itemSlice = createSlice({\n  name: \"stock\",\n  initialState,\n  reducers: {\n    pageIncrement: state => {\n      if (state.item.totalPage > state.page) {\n        state.page += 1;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchStockData.pending, state => {\n      state.fetchStatus = \"loading\";\n    }).addCase(fetchStockData.fulfilled, (state, {\n      payload\n    }) => {\n      if (state.page > 1) {\n        payload.data.map(item => {\n          state.item.data.push(item);\n        });\n      } else {\n        state.item.data = payload.data;\n      }\n      state.item.totalData = payload.totalData;\n      state.item.totalPage = payload.totalPage;\n      state.fetchStatus = \"success\";\n    }).addCase(fetchStockData.rejected, (state, action) => {\n      var _action$error$message;\n      state.fetchStatus = (_action$error$message = action.error.message) !== null && _action$error$message !== void 0 ? _action$error$message : \"\";\n      console.log(action.error);\n    });\n  }\n});\nexport const {\n  pageIncrement\n} = itemSlice.actions;\nexport default itemSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","fetchStockData","page","limit","thunkAPI","console","log","response","get","responeData","data","initialState","item","id","BAS_DD","ISU_NM","MKTCAP","MKT_NM","TDD_OPNPRC","ACC_TRDVOL","totalPage","totalData","fetchStatus","itemSlice","name","reducers","pageIncrement","state","extraReducers","builder","addCase","pending","fulfilled","payload","map","push","rejected","action","_action$error$message","error","message","actions","reducer"],"sources":["/Users/jungminwoo/Documents/GitHub/stock_inquiry_node_react/react/src/slice/itemSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\ninterface fetchStockDataType {\n  id: number;\n  BAS_DD: number;\n  ISU_NM: string;\n  MKTCAP: number;\n  MKT_NM: string;\n  TDD_OPNPRC: number;\n  ACC_TRDVOL: number;\n}\n\ninterface fetchStockType {\n  data: fetchStockDataType[];\n  totalPage: number;\n  totalData: number;\n}\n\ninterface stockDataProps {\n  page: number;\n  limit: number;\n}\n\nexport const fetchStockData = createAsyncThunk(\n  \"stock/items\",\n  async ({ page, limit }: stockDataProps, thunkAPI) => {\n    console.log(\"api 통신\");\n    const response = await axios.get(\n      `http://219.250.2.138:5018/krx/api/list/${page}/${limit}`\n    );\n    const responeData = response.data;\n    return responeData as fetchStockType;\n  }\n);\n\nexport interface stateProps {\n  item: fetchStockType;\n  fetchStatus: string;\n  page: number;\n}\n\nconst initialState: stateProps = {\n  item: {\n    data: [\n      {\n        id: 0,\n        BAS_DD: 0,\n        ISU_NM: \"\",\n        MKTCAP: 0,\n        MKT_NM: \"\",\n        TDD_OPNPRC: 0,\n        ACC_TRDVOL: 0,\n      },\n    ],\n    totalPage: 0,\n    totalData: 0,\n  },\n  fetchStatus: \"\",\n  page: 1,\n};\n\nconst itemSlice = createSlice({\n  name: \"stock\",\n  initialState,\n  reducers: {\n    pageIncrement: (state) => {\n      if (state.item.totalPage > state.page) {\n        state.page += 1;\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchStockData.pending, (state) => {\n        state.fetchStatus = \"loading\";\n      })\n      .addCase(fetchStockData.fulfilled, (state, { payload }) => {\n        if (state.page > 1) {\n          payload.data.map((item) => {\n            state.item.data.push(item);\n          });\n        } else {\n          state.item.data = payload.data;\n        }\n        state.item.totalData = payload.totalData;\n        state.item.totalPage = payload.totalPage;\n        state.fetchStatus = \"success\";\n      })\n      .addCase(fetchStockData.rejected, (state, action) => {\n        state.fetchStatus = action.error.message ?? \"\";\n        console.log(action.error);\n      });\n  },\n});\n\nexport const { pageIncrement } = itemSlice.actions;\nexport default itemSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAuBzB,OAAO,MAAMC,cAAc,GAAGH,gBAAgB,CAC5C,aAAa,EACb,OAAO;EAAEI,IAAI;EAAEC;AAAsB,CAAC,EAAEC,QAAQ,KAAK;EACnDC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;EACrB,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAC7B,0CAAyCN,IAAK,IAAGC,KAAM,EAC1D,CAAC;EACD,MAAMM,WAAW,GAAGF,QAAQ,CAACG,IAAI;EACjC,OAAOD,WAAW;AACpB,CACF,CAAC;AAQD,MAAME,YAAwB,GAAG;EAC/BC,IAAI,EAAE;IACJF,IAAI,EAAE,CACJ;MACEG,EAAE,EAAE,CAAC;MACLC,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE,EAAE;MACVC,UAAU,EAAE,CAAC;MACbC,UAAU,EAAE;IACd,CAAC,CACF;IACDC,SAAS,EAAE,CAAC;IACZC,SAAS,EAAE;EACb,CAAC;EACDC,WAAW,EAAE,EAAE;EACfpB,IAAI,EAAE;AACR,CAAC;AAED,MAAMqB,SAAS,GAAGxB,WAAW,CAAC;EAC5ByB,IAAI,EAAE,OAAO;EACbb,YAAY;EACZc,QAAQ,EAAE;IACRC,aAAa,EAAGC,KAAK,IAAK;MACxB,IAAIA,KAAK,CAACf,IAAI,CAACQ,SAAS,GAAGO,KAAK,CAACzB,IAAI,EAAE;QACrCyB,KAAK,CAACzB,IAAI,IAAI,CAAC;MACjB;IACF;EACF,CAAC;EACD0B,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAAC7B,cAAc,CAAC8B,OAAO,EAAGJ,KAAK,IAAK;MAC1CA,KAAK,CAACL,WAAW,GAAG,SAAS;IAC/B,CAAC,CAAC,CACDQ,OAAO,CAAC7B,cAAc,CAAC+B,SAAS,EAAE,CAACL,KAAK,EAAE;MAAEM;IAAQ,CAAC,KAAK;MACzD,IAAIN,KAAK,CAACzB,IAAI,GAAG,CAAC,EAAE;QAClB+B,OAAO,CAACvB,IAAI,CAACwB,GAAG,CAAEtB,IAAI,IAAK;UACzBe,KAAK,CAACf,IAAI,CAACF,IAAI,CAACyB,IAAI,CAACvB,IAAI,CAAC;QAC5B,CAAC,CAAC;MACJ,CAAC,MAAM;QACLe,KAAK,CAACf,IAAI,CAACF,IAAI,GAAGuB,OAAO,CAACvB,IAAI;MAChC;MACAiB,KAAK,CAACf,IAAI,CAACS,SAAS,GAAGY,OAAO,CAACZ,SAAS;MACxCM,KAAK,CAACf,IAAI,CAACQ,SAAS,GAAGa,OAAO,CAACb,SAAS;MACxCO,KAAK,CAACL,WAAW,GAAG,SAAS;IAC/B,CAAC,CAAC,CACDQ,OAAO,CAAC7B,cAAc,CAACmC,QAAQ,EAAE,CAACT,KAAK,EAAEU,MAAM,KAAK;MAAA,IAAAC,qBAAA;MACnDX,KAAK,CAACL,WAAW,IAAAgB,qBAAA,GAAGD,MAAM,CAACE,KAAK,CAACC,OAAO,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;MAC9CjC,OAAO,CAACC,GAAG,CAAC+B,MAAM,CAACE,KAAK,CAAC;IAC3B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEb;AAAc,CAAC,GAAGH,SAAS,CAACkB,OAAO;AAClD,eAAelB,SAAS,CAACmB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}